<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- saved from url=(0145)file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/_replication_8cpp-example.html#_a19 -->
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<meta http-equiv="X-UA-Compatible" content="IE=9">
<meta name="generator" content="Doxygen 1.8.13">
<title>QuantLib: Replication.cpp</title>
<link href="./QuantLib_ Replication.cpp_files/css" rel="stylesheet" type="text/css">
<link href="./QuantLib_ Replication.cpp_files/tabs.css" rel="stylesheet" type="text/css">
<script type="text/javascript" src="./QuantLib_ Replication.cpp_files/jquery.js.下载"></script>
<script type="text/javascript" src="./QuantLib_ Replication.cpp_files/dynsections.js.下载"></script>
<link href="./QuantLib_ Replication.cpp_files/search.css" rel="stylesheet" type="text/css">
<script type="text/javascript" src="./QuantLib_ Replication.cpp_files/search.js.下载"></script>
<link rel="search" href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/search_opensearch.php?v=opensearch.xml" type="application/opensearchdescription+xml" title="QuantLib">
<script type="text/x-mathjax-config;executed=true">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script src="./QuantLib_ Replication.cpp_files/MathJax.js.下载" id=""></script>
<link href="./QuantLib_ Replication.cpp_files/doxygen.css" rel="stylesheet" type="text/css">
<link href="./QuantLib_ Replication.cpp_files/quantlibextra.css" rel="stylesheet" type="text/css">
<style type="text/css">.MathJax_Preview {color: #888}
#MathJax_Message {position: fixed; left: 1em; bottom: 1.5em; background-color: #E6E6E6; border: 1px solid #959595; margin: 0px; padding: 2px 8px; z-index: 102; color: black; font-size: 80%; width: auto; white-space: nowrap}
#MathJax_MSIE_Frame {position: absolute; top: 0; left: 0; width: 0px; z-index: 101; border: 0px; margin: 0px; padding: 0px}
.MathJax_Error {color: #CC0000; font-style: italic}
</style><style type="text/css">#MathJax_About {position: fixed; left: 50%; width: auto; text-align: center; border: 3px outset; padding: 1em 2em; background-color: #DDDDDD; color: black; cursor: default; font-family: message-box; font-size: 120%; font-style: normal; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; border-radius: 15px; -webkit-border-radius: 15px; -moz-border-radius: 15px; -khtml-border-radius: 15px; box-shadow: 0px 10px 20px #808080; -webkit-box-shadow: 0px 10px 20px #808080; -moz-box-shadow: 0px 10px 20px #808080; -khtml-box-shadow: 0px 10px 20px #808080; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
#MathJax_About.MathJax_MousePost {outline: none}
.MathJax_Menu {position: absolute; background-color: white; color: black; width: auto; padding: 2px; border: 1px solid #CCCCCC; margin: 0; cursor: default; font: menu; text-align: left; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; box-shadow: 0px 10px 20px #808080; -webkit-box-shadow: 0px 10px 20px #808080; -moz-box-shadow: 0px 10px 20px #808080; -khtml-box-shadow: 0px 10px 20px #808080; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
.MathJax_MenuItem {padding: 2px 2em; background: transparent}
.MathJax_MenuArrow {position: absolute; right: .5em; padding-top: .25em; color: #666666; font-size: .75em}
.MathJax_MenuActive .MathJax_MenuArrow {color: white}
.MathJax_MenuArrow.RTL {left: .5em; right: auto}
.MathJax_MenuCheck {position: absolute; left: .7em}
.MathJax_MenuCheck.RTL {right: .7em; left: auto}
.MathJax_MenuRadioCheck {position: absolute; left: 1em}
.MathJax_MenuRadioCheck.RTL {right: 1em; left: auto}
.MathJax_MenuLabel {padding: 2px 2em 4px 1.33em; font-style: italic}
.MathJax_MenuRule {border-top: 1px solid #CCCCCC; margin: 4px 1px 0px}
.MathJax_MenuDisabled {color: GrayText}
.MathJax_MenuActive {background-color: Highlight; color: HighlightText}
.MathJax_MenuDisabled:focus, .MathJax_MenuLabel:focus {background-color: #E8E8E8}
.MathJax_ContextMenu:focus {outline: none}
.MathJax_ContextMenu .MathJax_MenuItem:focus {outline: none}
#MathJax_AboutClose {top: .2em; right: .2em}
.MathJax_Menu .MathJax_MenuClose {top: -10px; left: -10px}
.MathJax_MenuClose {position: absolute; cursor: pointer; display: inline-block; border: 2px solid #AAA; border-radius: 18px; -webkit-border-radius: 18px; -moz-border-radius: 18px; -khtml-border-radius: 18px; font-family: 'Courier New',Courier; font-size: 24px; color: #F0F0F0}
.MathJax_MenuClose span {display: block; background-color: #AAA; border: 1.5px solid; border-radius: 18px; -webkit-border-radius: 18px; -moz-border-radius: 18px; -khtml-border-radius: 18px; line-height: 0; padding: 8px 0 6px}
.MathJax_MenuClose:hover {color: white!important; border: 2px solid #CCC!important}
.MathJax_MenuClose:hover span {background-color: #CCC!important}
.MathJax_MenuClose:hover:focus {outline: none}
</style><style type="text/css">#MathJax_Zoom {position: absolute; background-color: #F0F0F0; overflow: auto; display: block; z-index: 301; padding: .5em; border: 1px solid black; margin: 0; font-weight: normal; font-style: normal; text-align: left; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; -webkit-box-sizing: content-box; -moz-box-sizing: content-box; box-sizing: content-box; box-shadow: 5px 5px 15px #AAAAAA; -webkit-box-shadow: 5px 5px 15px #AAAAAA; -moz-box-shadow: 5px 5px 15px #AAAAAA; -khtml-box-shadow: 5px 5px 15px #AAAAAA; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
#MathJax_ZoomOverlay {position: absolute; left: 0; top: 0; z-index: 300; display: inline-block; width: 100%; height: 100%; border: 0; padding: 0; margin: 0; background-color: white; opacity: 0; filter: alpha(opacity=0)}
#MathJax_ZoomFrame {position: relative; display: inline-block; height: 0; width: 0}
#MathJax_ZoomEventTrap {position: absolute; left: 0; top: 0; z-index: 302; display: inline-block; border: 0; padding: 0; margin: 0; background-color: white; opacity: 0; filter: alpha(opacity=0)}
</style></head>
<body><div id="MathJax_Message" style="display: none;"></div>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname"><a href="http://quantlib.org/">
       <img alt="QuantLib" src="./QuantLib_ Replication.cpp_files/QL-title.jpg"></a>
   <div id="projectbrief">A free/open-source library for quantitative finance</div>
   <div id="projectnumber">Reference manual - version 1.10</div>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="./QuantLib_ Replication.cpp_files/menudata.js.下载"></script>
<script type="text/javascript" src="./QuantLib_ Replication.cpp_files/menu.js.下载"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,true,'search.php','Search');
  $(document).ready(function() {
    if ($('.searchresults').length > 0) { searchBox.DOMSearchField().focus(); }
  });
});
</script>
<div id="main-nav"><ul class="sm sm-dox" id="main-menu" data-smartmenus-id="15040898464074297"><li><a href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/index.html">Main Page</a></li><li><a href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/pages.html">Related Pages</a></li><li><a href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/modules.html">Modules</a></li><li><a href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/annotated.html" class="has-submenu" id="sm-15040898464074297-1" aria-haspopup="true" aria-controls="sm-15040898464074297-2" aria-expanded="false"><span class="sub-arrow">+</span>Classes</a><ul id="sm-15040898464074297-2" role="group" aria-hidden="true" aria-labelledby="sm-15040898464074297-1" aria-expanded="false"><li><a href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/annotated.html">Class List</a></li><li><a href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/classes.html">Class Index</a></li><li><a href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/inherits.html">Class Hierarchy</a></li><li><a href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/functions.html" class="has-submenu" id="sm-15040898464074297-3" aria-haspopup="true" aria-controls="sm-15040898464074297-4" aria-expanded="false"><span class="sub-arrow">+</span>Class Members</a><ul id="sm-15040898464074297-4" role="group" aria-hidden="true" aria-labelledby="sm-15040898464074297-3" aria-expanded="false"><li><a href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/functions.html" class="has-submenu" id="sm-15040898464074297-5" aria-haspopup="true" aria-controls="sm-15040898464074297-6" aria-expanded="false"><span class="sub-arrow">+</span>All</a><ul id="sm-15040898464074297-6" role="group" aria-hidden="true" aria-labelledby="sm-15040898464074297-5" aria-expanded="false"><li><a href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/functions.html#index_a">a</a></li><li><a href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/functions_b.html#index_b">b</a></li><li><a href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/functions_c.html#index_c">c</a></li><li><a href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/functions_d.html#index_d">d</a></li><li><a href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/functions_e.html#index_e">e</a></li><li><a href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/functions_f.html#index_f">f</a></li><li><a href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/functions_g.html#index_g">g</a></li><li><a href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/functions_h.html#index_h">h</a></li><li><a href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/functions_i.html#index_i">i</a></li><li><a href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/functions_j.html#index_j">j</a></li><li><a href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/functions_k.html#index_k">k</a></li><li><a href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/functions_l.html#index_l">l</a></li><li><a href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/functions_m.html#index_m">m</a></li><li><a href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/functions_n.html#index_n">n</a></li><li><a href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/functions_o.html#index_o">o</a></li><li><a href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/functions_p.html#index_p">p</a></li><li><a href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/functions_q.html#index_q">q</a></li><li><a href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/functions_r.html#index_r">r</a></li><li><a href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/functions_s.html#index_s">s</a></li><li><a href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/functions_t.html#index_t">t</a></li><li><a href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/functions_u.html#index_u">u</a></li><li><a href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/functions_v.html#index_v">v</a></li><li><a href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/functions_w.html#index_w">w</a></li><li><a href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/functions_x.html#index_x">x</a></li><li><a href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/functions_y.html#index_y">y</a></li><li><a href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/functions_z.html#index_z">z</a></li><li><a href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/functions_0x7e.html#index_0x7e">~</a></li></ul></li><li><a href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/functions_func.html" class="has-submenu" id="sm-15040898464074297-7" aria-haspopup="true" aria-controls="sm-15040898464074297-8" aria-expanded="false"><span class="sub-arrow">+</span>Functions</a><ul id="sm-15040898464074297-8" role="group" aria-hidden="true" aria-labelledby="sm-15040898464074297-7" aria-expanded="false"><li><a href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/functions_func.html#index_a">a</a></li><li><a href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/functions_func_b.html#index_b">b</a></li><li><a href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/functions_func_c.html#index_c">c</a></li><li><a href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/functions_func_d.html#index_d">d</a></li><li><a href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/functions_func_e.html#index_e">e</a></li><li><a href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/functions_func_f.html#index_f">f</a></li><li><a href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/functions_func_g.html#index_g">g</a></li><li><a href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/functions_func_h.html#index_h">h</a></li><li><a href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/functions_func_i.html#index_i">i</a></li><li><a href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/functions_func_j.html#index_j">j</a></li><li><a href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/functions_func_k.html#index_k">k</a></li><li><a href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/functions_func_l.html#index_l">l</a></li><li><a href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/functions_func_m.html#index_m">m</a></li><li><a href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/functions_func_n.html#index_n">n</a></li><li><a href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/functions_func_o.html#index_o">o</a></li><li><a href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/functions_func_p.html#index_p">p</a></li><li><a href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/functions_func_r.html#index_r">r</a></li><li><a href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/functions_func_s.html#index_s">s</a></li><li><a href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/functions_func_t.html#index_t">t</a></li><li><a href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/functions_func_u.html#index_u">u</a></li><li><a href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/functions_func_v.html#index_v">v</a></li><li><a href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/functions_func_w.html#index_w">w</a></li><li><a href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/functions_func_x.html#index_x">x</a></li><li><a href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/functions_func_y.html#index_y">y</a></li><li><a href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/functions_func_z.html#index_z">z</a></li><li><a href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/functions_func_0x7e.html#index_0x7e">~</a></li></ul></li><li><a href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/functions_vars.html" class="has-submenu" id="sm-15040898464074297-9" aria-haspopup="true" aria-controls="sm-15040898464074297-10" aria-expanded="false"><span class="sub-arrow">+</span>Variables</a><ul id="sm-15040898464074297-10" role="group" aria-hidden="true" aria-labelledby="sm-15040898464074297-9" aria-expanded="false"><li><a href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/functions_vars.html#index_b">b</a></li><li><a href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/functions_vars.html#index_c">c</a></li><li><a href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/functions_vars.html#index_e">e</a></li><li><a href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/functions_vars.html#index_f">f</a></li><li><a href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/functions_vars.html#index_g">g</a></li><li><a href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/functions_vars.html#index_i">i</a></li><li><a href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/functions_vars.html#index_l">l</a></li><li><a href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/functions_vars.html#index_m">m</a></li><li><a href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/functions_vars.html#index_n">n</a></li><li><a href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/functions_vars.html#index_o">o</a></li><li><a href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/functions_vars.html#index_p">p</a></li><li><a href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/functions_vars.html#index_q">q</a></li><li><a href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/functions_vars.html#index_r">r</a></li><li><a href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/functions_vars.html#index_s">s</a></li><li><a href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/functions_vars.html#index_u">u</a></li><li><a href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/functions_vars.html#index_v">v</a></li><li><a href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/functions_vars.html#index_x">x</a></li></ul></li><li><a href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/functions_type.html">Typedefs</a></li><li><a href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/functions_enum.html" class="has-submenu" id="sm-15040898464074297-11" aria-haspopup="true" aria-controls="sm-15040898464074297-12" aria-expanded="false"><span class="sub-arrow">+</span>Enumerations</a><ul id="sm-15040898464074297-12" role="group" aria-hidden="true" aria-labelledby="sm-15040898464074297-11" aria-expanded="false"><li><a href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/functions_enum.html#index_b">b</a></li><li><a href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/functions_enum.html#index_c">c</a></li><li><a href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/functions_enum.html#index_d">d</a></li><li><a href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/functions_enum.html#index_m">m</a></li><li><a href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/functions_enum.html#index_o">o</a></li><li><a href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/functions_enum.html#index_r">r</a></li><li><a href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/functions_enum.html#index_s">s</a></li><li><a href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/functions_enum.html#index_t">t</a></li></ul></li><li><a href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/functions_eval.html" class="has-submenu" id="sm-15040898464074297-13" aria-haspopup="true" aria-controls="sm-15040898464074297-14" aria-expanded="false"><span class="sub-arrow">+</span>Enumerator</a><ul id="sm-15040898464074297-14" role="group" aria-hidden="true" aria-labelledby="sm-15040898464074297-13" aria-expanded="false"><li><a href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/functions_eval.html#index_a">a</a></li><li><a href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/functions_eval.html#index_b">b</a></li><li><a href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/functions_eval.html#index_c">c</a></li><li><a href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/functions_eval.html#index_d">d</a></li><li><a href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/functions_eval.html#index_e">e</a></li><li><a href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/functions_eval.html#index_f">f</a></li><li><a href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/functions_eval.html#index_g">g</a></li><li><a href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/functions_eval.html#index_h">h</a></li><li><a href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/functions_eval.html#index_i">i</a></li><li><a href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/functions_eval.html#index_j">j</a></li><li><a href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/functions_eval.html#index_k">k</a></li><li><a href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/functions_eval.html#index_l">l</a></li><li><a href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/functions_eval.html#index_m">m</a></li><li><a href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/functions_eval.html#index_n">n</a></li><li><a href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/functions_eval.html#index_o">o</a></li><li><a href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/functions_eval.html#index_p">p</a></li><li><a href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/functions_eval.html#index_s">s</a></li><li><a href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/functions_eval.html#index_t">t</a></li><li><a href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/functions_eval.html#index_u">u</a></li><li><a href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/functions_eval.html#index_x">x</a></li><li><a href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/functions_eval.html#index_z">z</a></li></ul></li><li><a href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/functions_rela.html">Related Functions</a></li></ul></li></ul></li><li><a href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/examples.html">Examples</a></li><li style="float:right"><div id="MSearchBox" class="MSearchBoxInactive"><div class="left"><form id="FSearchBox" action="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/search.php" method="get"><img id="MSearchSelect" src="./QuantLib_ Replication.cpp_files/mag.png" alt=""><input type="text" id="MSearchField" name="query" value="Search" size="20" accesskey="S" onfocus="searchBox.OnSearchFieldFocus(true)" onblur="searchBox.OnSearchFieldFocus(false)"></form></div><div class="right"></div></div></li></ul></div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Replication.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<p>This example uses the CompositeInstrument class to perform static replication of a down-and-out barrier option.</p>
<div class="fragment"><div class="line"><span class="comment">/* -*- mode: c++; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- */</span></div><div class="line"></div><div class="line"><span class="comment">/*  This example showcases the CompositeInstrument class. Such class</span></div><div class="line"><span class="comment">    is used to build a static replication of a down-and-out barrier</span></div><div class="line"><span class="comment">    option, as outlined in Section 10.2 of Mark Joshi's "The Concepts</span></div><div class="line"><span class="comment">    and Practice of Mathematical Finance" to which we refer the</span></div><div class="line"><span class="comment">    reader.</span></div><div class="line"><span class="comment">*/</span></div><div class="line"></div><div class="line"><span class="preprocessor">#include &lt;ql/qldefines.hpp&gt;</span></div><div class="line"><span class="preprocessor">#ifdef BOOST_MSVC</span></div><div class="line"><span class="preprocessor">#  include &lt;ql/auto_link.hpp&gt;</span></div><div class="line"><span class="preprocessor">#endif</span></div><div class="line"><span class="preprocessor">#include &lt;ql/instruments/compositeinstrument.hpp&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;ql/instruments/barrieroption.hpp&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;ql/instruments/europeanoption.hpp&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;ql/pricingengines/barrier/analyticbarrierengine.hpp&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;ql/pricingengines/vanilla/analyticeuropeanengine.hpp&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;ql/exercise.hpp&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;ql/termstructures/yield/flatforward.hpp&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;ql/termstructures/volatility/equityfx/blackconstantvol.hpp&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;ql/quotes/simplequote.hpp&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;ql/time/calendars/nullcalendar.hpp&gt;</span></div><div class="line"></div><div class="line"><span class="preprocessor">#include &lt;boost/timer.hpp&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;iostream&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;iomanip&gt;</span></div><div class="line"></div><div class="line"><span class="keyword">using namespace </span><a class="code" href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/namespace_quant_lib.html">QuantLib</a>;</div><div class="line"></div><div class="line"><span class="preprocessor">#if defined(QL_ENABLE_SESSIONS)</span></div><div class="line"><span class="keyword">namespace </span><a class="code" href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/namespace_quant_lib.html">QuantLib</a> {</div><div class="line"></div><div class="line">    <a name="a0"></a><a class="code" href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/group__types.html#gab9c87440c314438e51a899a03d2442d0" title="integer number ">Integer</a> sessionId() { <span class="keywordflow">return</span> 0; }</div><div class="line"></div><div class="line">}</div><div class="line"><span class="preprocessor">#endif</span></div><div class="line"></div><div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">int</span>, <span class="keywordtype">char</span>* []) {</div><div class="line"></div><div class="line">    <span class="keywordflow">try</span> {</div><div class="line"></div><div class="line">        boost::timer timer;</div><div class="line">        std::cout &lt;&lt; std::endl;</div><div class="line"></div><div class="line">        <a name="_a1"></a><a class="code" href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/class_quant_lib_1_1_date.html" title="Concrete date class. ">Date</a> today(29, May, 2006);</div><div class="line">        <a name="a2"></a><a class="code" href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/class_quant_lib_1_1_singleton.html#ab7455b7e1235d292c444095842349291" title="access to the unique instance ">Settings::instance</a>().<a name="a3"></a><a class="code" href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/class_quant_lib_1_1_settings.html#a95055e9410ed0465a5f30d3ffc90c1d3" title="the date at which pricing is to be performed. ">evaluationDate</a>() = today;</div><div class="line"></div><div class="line">        <span class="comment">// the option to replicate</span></div><div class="line">        Barrier::Type barrierType = Barrier::DownOut;</div><div class="line">        <a name="a4"></a><a class="code" href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/group__types.html#ga4bdf4bfe76b9ffa6fa64c47d8bfa0c78" title="real number ">Real</a> barrier = 70.0;</div><div class="line">        <a class="code" href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/group__types.html#ga4bdf4bfe76b9ffa6fa64c47d8bfa0c78" title="real number ">Real</a> rebate = 0.0;</div><div class="line">        Option::Type type = Option::Put;</div><div class="line">        <a class="code" href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/group__types.html#ga4bdf4bfe76b9ffa6fa64c47d8bfa0c78" title="real number ">Real</a> underlyingValue = 100.0;</div><div class="line">        boost::shared_ptr&lt;SimpleQuote&gt; underlying(</div><div class="line">                                            <span class="keyword">new</span> <a name="_a5"></a><a class="code" href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/class_quant_lib_1_1_simple_quote.html" title="market element returning a stored value ">SimpleQuote</a>(underlyingValue));</div><div class="line">        <a class="code" href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/group__types.html#ga4bdf4bfe76b9ffa6fa64c47d8bfa0c78" title="real number ">Real</a> strike = 100.0;</div><div class="line">        boost::shared_ptr&lt;SimpleQuote&gt; riskFreeRate(<span class="keyword">new</span> <a class="code" href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/class_quant_lib_1_1_simple_quote.html" title="market element returning a stored value ">SimpleQuote</a>(0.04));</div><div class="line">        boost::shared_ptr&lt;SimpleQuote&gt; <a name="a6"></a><a class="code" href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/group__manips.html#gac402ef7c87f63f7c603ee87210b5750c" title="output volatilities as percentages ">volatility</a>(<span class="keyword">new</span> <a class="code" href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/class_quant_lib_1_1_simple_quote.html" title="market element returning a stored value ">SimpleQuote</a>(0.20));</div><div class="line">        <a class="code" href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/class_quant_lib_1_1_date.html" title="Concrete date class. ">Date</a> maturity = today + 1*Years;</div><div class="line"></div><div class="line">        std::cout &lt;&lt; std::endl ;</div><div class="line"></div><div class="line">        <span class="comment">// write column headings</span></div><div class="line">        <a class="code" href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/group__types.html#gaf38bdb4c54463b1f456655efa95b5c77" title="size of a container ">Size</a> widths[] = { 45, 15, 15 };</div><div class="line">        <a class="code" href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/group__types.html#gaf38bdb4c54463b1f456655efa95b5c77" title="size of a container ">Size</a> totalWidth = widths[0]+widths[1]+widths[2];</div><div class="line">        std::string rule(totalWidth, <span class="charliteral">'-'</span>), dblrule(totalWidth, <span class="charliteral">'='</span>);</div><div class="line"></div><div class="line">        std::cout &lt;&lt; dblrule &lt;&lt; std::endl;</div><div class="line">        std::cout &lt;&lt; <span class="stringliteral">"Initial market conditions"</span> &lt;&lt; std::endl;</div><div class="line">        std::cout &lt;&lt; dblrule &lt;&lt; std::endl;</div><div class="line">        std::cout &lt;&lt; std::setw(widths[0]) &lt;&lt; std::left &lt;&lt; <span class="stringliteral">"Option"</span></div><div class="line">                  &lt;&lt; std::setw(widths[1]) &lt;&lt; std::left &lt;&lt; <span class="stringliteral">"NPV"</span></div><div class="line">                  &lt;&lt; std::setw(widths[2]) &lt;&lt; std::left &lt;&lt; <span class="stringliteral">"Error"</span></div><div class="line">                  &lt;&lt; std::endl;</div><div class="line">        std::cout &lt;&lt; rule &lt;&lt; std::endl;</div><div class="line"></div><div class="line">        <span class="comment">// bootstrap the yield/vol curves</span></div><div class="line">        <a name="_a7"></a><a class="code" href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/class_quant_lib_1_1_day_counter.html" title="day counter class ">DayCounter</a> dayCounter = <a name="_a8"></a><a class="code" href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/class_quant_lib_1_1_actual365_fixed.html" title="Actual/365 (Fixed) day count convention. ">Actual365Fixed</a>();</div><div class="line">        <a name="_a9"></a><a class="code" href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/class_quant_lib_1_1_handle.html" title="Shared handle to an observable. ">Handle&lt;Quote&gt;</a> h1(riskFreeRate);</div><div class="line">        <a class="code" href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/class_quant_lib_1_1_handle.html" title="Shared handle to an observable. ">Handle&lt;Quote&gt;</a> h2(volatility);</div><div class="line">        <a name="_a10"></a><a class="code" href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/class_quant_lib_1_1_handle.html">Handle&lt;YieldTermStructure&gt;</a> flatRate(</div><div class="line">            boost::shared_ptr&lt;YieldTermStructure&gt;(</div><div class="line">                                  <span class="keyword">new</span> <a name="_a11"></a><a class="code" href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/class_quant_lib_1_1_flat_forward.html" title="Flat interest-rate curve. ">FlatForward</a>(0, <a name="_a12"></a><a class="code" href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/class_quant_lib_1_1_null_calendar.html" title="Calendar for reproducing theoretical calculations. ">NullCalendar</a>(),</div><div class="line">                                                  h1, dayCounter)));</div><div class="line">        <a class="code" href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/class_quant_lib_1_1_handle.html" title="Shared handle to an observable. ">Handle&lt;BlackVolTermStructure&gt;</a> flatVol(</div><div class="line">            boost::shared_ptr&lt;BlackVolTermStructure&gt;(</div><div class="line">                               <span class="keyword">new</span> <a name="_a13"></a><a class="code" href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/class_quant_lib_1_1_black_constant_vol.html" title="Constant Black volatility, no time-strike dependence. ">BlackConstantVol</a>(0, <a class="code" href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/class_quant_lib_1_1_null_calendar.html" title="Calendar for reproducing theoretical calculations. ">NullCalendar</a>(),</div><div class="line">                                                    h2, dayCounter)));</div><div class="line"></div><div class="line">        <span class="comment">// instantiate the option</span></div><div class="line">        boost::shared_ptr&lt;Exercise&gt; exercise(</div><div class="line">                                         <span class="keyword">new</span> <a name="_a14"></a><a class="code" href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/class_quant_lib_1_1_european_exercise.html" title="European exercise. ">EuropeanExercise</a>(maturity));</div><div class="line">        boost::shared_ptr&lt;StrikedTypePayoff&gt; payoff(</div><div class="line">                                        <span class="keyword">new</span> <a name="_a15"></a><a class="code" href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/class_quant_lib_1_1_plain_vanilla_payoff.html" title="Plain-vanilla payoff. ">PlainVanillaPayoff</a>(type, strike));</div><div class="line"></div><div class="line">        boost::shared_ptr&lt;BlackScholesProcess&gt; bsProcess(</div><div class="line">                            <span class="keyword">new</span> <a name="_a16"></a><a class="code" href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/class_quant_lib_1_1_black_scholes_process.html" title="Black-Scholes (1973) stochastic process. ">BlackScholesProcess</a>(<a class="code" href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/class_quant_lib_1_1_handle.html" title="Shared handle to an observable. ">Handle&lt;Quote&gt;</a>(underlying),</div><div class="line">                                                    flatRate, flatVol));</div><div class="line"></div><div class="line">        boost::shared_ptr&lt;PricingEngine&gt; barrierEngine(</div><div class="line">                                        <span class="keyword">new</span> <a name="_a17"></a><a class="code" href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/class_quant_lib_1_1_analytic_barrier_engine.html" title="Pricing engine for barrier options using analytical formulae. ">AnalyticBarrierEngine</a>(bsProcess));</div><div class="line">        boost::shared_ptr&lt;PricingEngine&gt; europeanEngine(</div><div class="line">                                       <span class="keyword">new</span> <a name="_a18"></a><a class="code" href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/class_quant_lib_1_1_analytic_european_engine.html" title="Pricing engine for European vanilla options using analytical formulae. ">AnalyticEuropeanEngine</a>(bsProcess));</div><div class="line"></div><div class="line">        <a name="_a19"></a><a class="code" href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/class_quant_lib_1_1_barrier_option.html" title="Barrier option on a single asset. ">BarrierOption</a> referenceOption(barrierType, barrier, rebate,</div><div class="line">                                      payoff, exercise);</div><div class="line">        referenceOption.<a name="a20"></a><a class="code" href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/class_quant_lib_1_1_instrument.html#af259149d11ddda95328d6a41be778078" title="set the pricing engine to be used. ">setPricingEngine</a>(barrierEngine);</div><div class="line"></div><div class="line">        <a class="code" href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/group__types.html#ga4bdf4bfe76b9ffa6fa64c47d8bfa0c78" title="real number ">Real</a> referenceValue = referenceOption.<a name="a21"></a><a class="code" href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/class_quant_lib_1_1_instrument.html#a4f791921f063f3ea19bd6efa9ceb4892" title="returns the net present value of the instrument. ">NPV</a>();</div><div class="line"></div><div class="line">        std::cout &lt;&lt; std::setw(widths[0]) &lt;&lt; std::left</div><div class="line">                  &lt;&lt; <span class="stringliteral">"Original barrier option"</span></div><div class="line">                  &lt;&lt; std::fixed</div><div class="line">                  &lt;&lt; std::setw(widths[1]) &lt;&lt; std::left &lt;&lt; referenceValue</div><div class="line">                  &lt;&lt; std::setw(widths[2]) &lt;&lt; std::left &lt;&lt; <span class="stringliteral">"N/A"</span></div><div class="line">                  &lt;&lt; std::endl;</div><div class="line"></div><div class="line">        <span class="comment">// Replicating portfolios</span></div><div class="line">        <a name="_a22"></a><a class="code" href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/class_quant_lib_1_1_composite_instrument.html" title="Composite instrument ">CompositeInstrument</a> portfolio1, portfolio2, portfolio3;</div><div class="line"></div><div class="line">        <span class="comment">// Final payoff first (the same for all portfolios):</span></div><div class="line">        <span class="comment">// as shown in Joshi, a put struck at K...</span></div><div class="line">        boost::shared_ptr&lt;Instrument&gt; put1(</div><div class="line">                                        <span class="keyword">new</span> <a name="_a23"></a><a class="code" href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/class_quant_lib_1_1_european_option.html" title="European option on a single asset. ">EuropeanOption</a>(payoff, exercise));</div><div class="line">        put1-&gt;setPricingEngine(europeanEngine);</div><div class="line">        portfolio1.<a name="a24"></a><a class="code" href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/class_quant_lib_1_1_composite_instrument.html#a6c2e5140cb8d3d49eb526feba0d0fda0" title="adds an instrument to the composite ">add</a>(put1);</div><div class="line">        portfolio2.<a class="code" href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/class_quant_lib_1_1_composite_instrument.html#a6c2e5140cb8d3d49eb526feba0d0fda0" title="adds an instrument to the composite ">add</a>(put1);</div><div class="line">        portfolio3.<a class="code" href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/class_quant_lib_1_1_composite_instrument.html#a6c2e5140cb8d3d49eb526feba0d0fda0" title="adds an instrument to the composite ">add</a>(put1);</div><div class="line">        <span class="comment">// ...minus a digital put struck at B of notional K-B...</span></div><div class="line">        boost::shared_ptr&lt;StrikedTypePayoff&gt; digitalPayoff(</div><div class="line">                          <span class="keyword">new</span> <a name="_a25"></a><a class="code" href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/class_quant_lib_1_1_cash_or_nothing_payoff.html" title="Binary cash-or-nothing payoff. ">CashOrNothingPayoff</a>(Option::Put, barrier, 1.0));</div><div class="line">        boost::shared_ptr&lt;Instrument&gt; digitalPut(</div><div class="line">                                 <span class="keyword">new</span> <a class="code" href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/class_quant_lib_1_1_european_option.html" title="European option on a single asset. ">EuropeanOption</a>(digitalPayoff, exercise));</div><div class="line">        digitalPut-&gt;setPricingEngine(europeanEngine);</div><div class="line">        portfolio1.<a name="a26"></a><a class="code" href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/class_quant_lib_1_1_composite_instrument.html#af781618b4ac4bee06da95a7c8b2ee662" title="shorts an instrument from the composite ">subtract</a>(digitalPut, strike-barrier);</div><div class="line">        portfolio2.<a class="code" href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/class_quant_lib_1_1_composite_instrument.html#af781618b4ac4bee06da95a7c8b2ee662" title="shorts an instrument from the composite ">subtract</a>(digitalPut, strike-barrier);</div><div class="line">        portfolio3.<a class="code" href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/class_quant_lib_1_1_composite_instrument.html#af781618b4ac4bee06da95a7c8b2ee662" title="shorts an instrument from the composite ">subtract</a>(digitalPut, strike-barrier);</div><div class="line">        <span class="comment">// ...minus a put option struck at B.</span></div><div class="line">        boost::shared_ptr&lt;StrikedTypePayoff&gt; lowerPayoff(</div><div class="line">                                <span class="keyword">new</span> <a class="code" href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/class_quant_lib_1_1_plain_vanilla_payoff.html" title="Plain-vanilla payoff. ">PlainVanillaPayoff</a>(Option::Put, barrier));</div><div class="line">        boost::shared_ptr&lt;Instrument&gt; put2(</div><div class="line">                                   <span class="keyword">new</span> <a class="code" href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/class_quant_lib_1_1_european_option.html" title="European option on a single asset. ">EuropeanOption</a>(lowerPayoff, exercise));</div><div class="line">        put2-&gt;setPricingEngine(europeanEngine);</div><div class="line">        portfolio1.<a class="code" href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/class_quant_lib_1_1_composite_instrument.html#af781618b4ac4bee06da95a7c8b2ee662" title="shorts an instrument from the composite ">subtract</a>(put2);</div><div class="line">        portfolio2.<a class="code" href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/class_quant_lib_1_1_composite_instrument.html#af781618b4ac4bee06da95a7c8b2ee662" title="shorts an instrument from the composite ">subtract</a>(put2);</div><div class="line">        portfolio3.<a class="code" href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/class_quant_lib_1_1_composite_instrument.html#af781618b4ac4bee06da95a7c8b2ee662" title="shorts an instrument from the composite ">subtract</a>(put2);</div><div class="line"></div><div class="line">        <span class="comment">// Now we use puts struck at B to kill the value of the</span></div><div class="line">        <span class="comment">// portfolio on a number of points (B,t).  For the first</span></div><div class="line">        <span class="comment">// portfolio, we'll use 12 dates at one-month's distance.</span></div><div class="line">        <a class="code" href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/group__types.html#gab9c87440c314438e51a899a03d2442d0" title="integer number ">Integer</a> i;</div><div class="line">        <span class="keywordflow">for</span> (i=12; i&gt;=1; i--) {</div><div class="line">            <span class="comment">// First, we instantiate the option...</span></div><div class="line">            <a class="code" href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/class_quant_lib_1_1_date.html" title="Concrete date class. ">Date</a> innerMaturity = today + i*Months;</div><div class="line">            boost::shared_ptr&lt;Exercise&gt; innerExercise(</div><div class="line">                                         <span class="keyword">new</span> <a class="code" href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/class_quant_lib_1_1_european_exercise.html" title="European exercise. ">EuropeanExercise</a>(innerMaturity));</div><div class="line">            boost::shared_ptr&lt;StrikedTypePayoff&gt; innerPayoff(</div><div class="line">                                <span class="keyword">new</span> <a class="code" href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/class_quant_lib_1_1_plain_vanilla_payoff.html" title="Plain-vanilla payoff. ">PlainVanillaPayoff</a>(Option::Put, barrier));</div><div class="line">            boost::shared_ptr&lt;Instrument&gt; putn(</div><div class="line">                              <span class="keyword">new</span> <a class="code" href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/class_quant_lib_1_1_european_option.html" title="European option on a single asset. ">EuropeanOption</a>(innerPayoff, innerExercise));</div><div class="line">            putn-&gt;setPricingEngine(europeanEngine);</div><div class="line">            <span class="comment">// ...second, we evaluate the current portfolio and the</span></div><div class="line">            <span class="comment">// latest put at (B,t)...</span></div><div class="line">            <a class="code" href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/class_quant_lib_1_1_date.html" title="Concrete date class. ">Date</a> killDate = today + (i-1)*Months;</div><div class="line">            <a class="code" href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/class_quant_lib_1_1_singleton.html#ab7455b7e1235d292c444095842349291" title="access to the unique instance ">Settings::instance</a>().<a class="code" href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/class_quant_lib_1_1_settings.html#a95055e9410ed0465a5f30d3ffc90c1d3" title="the date at which pricing is to be performed. ">evaluationDate</a>() = killDate;</div><div class="line">            underlying-&gt;setValue(barrier);</div><div class="line">            <a class="code" href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/group__types.html#ga4bdf4bfe76b9ffa6fa64c47d8bfa0c78" title="real number ">Real</a> portfolioValue = portfolio1.<a class="code" href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/class_quant_lib_1_1_instrument.html#a4f791921f063f3ea19bd6efa9ceb4892" title="returns the net present value of the instrument. ">NPV</a>();</div><div class="line">            <a class="code" href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/group__types.html#ga4bdf4bfe76b9ffa6fa64c47d8bfa0c78" title="real number ">Real</a> putValue = putn-&gt;NPV();</div><div class="line">            <span class="comment">// ...finally, we estimate the notional that kills the</span></div><div class="line">            <span class="comment">// portfolio value at that point...</span></div><div class="line">            <a class="code" href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/group__types.html#ga4bdf4bfe76b9ffa6fa64c47d8bfa0c78" title="real number ">Real</a> notional = portfolioValue/putValue;</div><div class="line">            <span class="comment">// ...and we subtract from the portfolio a put with such</span></div><div class="line">            <span class="comment">// notional.</span></div><div class="line">            portfolio1.<a class="code" href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/class_quant_lib_1_1_composite_instrument.html#af781618b4ac4bee06da95a7c8b2ee662" title="shorts an instrument from the composite ">subtract</a>(putn, notional);</div><div class="line">        }</div><div class="line">        <span class="comment">// The portfolio being complete, we return to today's market...</span></div><div class="line">        <a class="code" href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/class_quant_lib_1_1_singleton.html#ab7455b7e1235d292c444095842349291" title="access to the unique instance ">Settings::instance</a>().<a class="code" href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/class_quant_lib_1_1_settings.html#a95055e9410ed0465a5f30d3ffc90c1d3" title="the date at which pricing is to be performed. ">evaluationDate</a>() = today;</div><div class="line">        underlying-&gt;setValue(underlyingValue);</div><div class="line">        <span class="comment">// ...and output the value.</span></div><div class="line">        <a class="code" href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/group__types.html#ga4bdf4bfe76b9ffa6fa64c47d8bfa0c78" title="real number ">Real</a> portfolioValue = portfolio1.<a class="code" href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/class_quant_lib_1_1_instrument.html#a4f791921f063f3ea19bd6efa9ceb4892" title="returns the net present value of the instrument. ">NPV</a>();</div><div class="line">        <a class="code" href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/group__types.html#ga4bdf4bfe76b9ffa6fa64c47d8bfa0c78" title="real number ">Real</a> error = portfolioValue - referenceValue;</div><div class="line">        std::cout &lt;&lt; std::setw(widths[0]) &lt;&lt; std::left</div><div class="line">                  &lt;&lt; <span class="stringliteral">"Replicating portfolio (12 dates)"</span></div><div class="line">                  &lt;&lt; std::fixed</div><div class="line">                  &lt;&lt; std::setw(widths[1]) &lt;&lt; std::left &lt;&lt; portfolioValue</div><div class="line">                  &lt;&lt; std::setw(widths[2]) &lt;&lt; std::left &lt;&lt; error</div><div class="line">                  &lt;&lt; std::endl;</div><div class="line"></div><div class="line">        <span class="comment">// For the second portfolio, we'll use 26 dates at two-weeks'</span></div><div class="line">        <span class="comment">// distance.</span></div><div class="line">        <span class="keywordflow">for</span> (i=52; i&gt;=2; i-=2) {</div><div class="line">            <span class="comment">// Same as above.</span></div><div class="line">            <a class="code" href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/class_quant_lib_1_1_date.html" title="Concrete date class. ">Date</a> innerMaturity = today + i*Weeks;</div><div class="line">            boost::shared_ptr&lt;Exercise&gt; innerExercise(</div><div class="line">                                         <span class="keyword">new</span> <a class="code" href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/class_quant_lib_1_1_european_exercise.html" title="European exercise. ">EuropeanExercise</a>(innerMaturity));</div><div class="line">            boost::shared_ptr&lt;StrikedTypePayoff&gt; innerPayoff(</div><div class="line">                                <span class="keyword">new</span> <a class="code" href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/class_quant_lib_1_1_plain_vanilla_payoff.html" title="Plain-vanilla payoff. ">PlainVanillaPayoff</a>(Option::Put, barrier));</div><div class="line">            boost::shared_ptr&lt;Instrument&gt; putn(</div><div class="line">                              <span class="keyword">new</span> <a class="code" href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/class_quant_lib_1_1_european_option.html" title="European option on a single asset. ">EuropeanOption</a>(innerPayoff, innerExercise));</div><div class="line">            putn-&gt;setPricingEngine(europeanEngine);</div><div class="line">            <a class="code" href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/class_quant_lib_1_1_date.html" title="Concrete date class. ">Date</a> killDate = today + (i-2)*Weeks;</div><div class="line">            <a class="code" href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/class_quant_lib_1_1_singleton.html#ab7455b7e1235d292c444095842349291" title="access to the unique instance ">Settings::instance</a>().<a class="code" href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/class_quant_lib_1_1_settings.html#a95055e9410ed0465a5f30d3ffc90c1d3" title="the date at which pricing is to be performed. ">evaluationDate</a>() = killDate;</div><div class="line">            underlying-&gt;setValue(barrier);</div><div class="line">            <a class="code" href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/group__types.html#ga4bdf4bfe76b9ffa6fa64c47d8bfa0c78" title="real number ">Real</a> portfolioValue = portfolio2.<a class="code" href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/class_quant_lib_1_1_instrument.html#a4f791921f063f3ea19bd6efa9ceb4892" title="returns the net present value of the instrument. ">NPV</a>();</div><div class="line">            <a class="code" href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/group__types.html#ga4bdf4bfe76b9ffa6fa64c47d8bfa0c78" title="real number ">Real</a> putValue = putn-&gt;NPV();</div><div class="line">            <a class="code" href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/group__types.html#ga4bdf4bfe76b9ffa6fa64c47d8bfa0c78" title="real number ">Real</a> notional = portfolioValue/putValue;</div><div class="line">            portfolio2.<a class="code" href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/class_quant_lib_1_1_composite_instrument.html#af781618b4ac4bee06da95a7c8b2ee662" title="shorts an instrument from the composite ">subtract</a>(putn, notional);</div><div class="line">        }</div><div class="line">        <a class="code" href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/class_quant_lib_1_1_singleton.html#ab7455b7e1235d292c444095842349291" title="access to the unique instance ">Settings::instance</a>().<a class="code" href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/class_quant_lib_1_1_settings.html#a95055e9410ed0465a5f30d3ffc90c1d3" title="the date at which pricing is to be performed. ">evaluationDate</a>() = today;</div><div class="line">        underlying-&gt;setValue(underlyingValue);</div><div class="line">        portfolioValue = portfolio2.<a class="code" href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/class_quant_lib_1_1_instrument.html#a4f791921f063f3ea19bd6efa9ceb4892" title="returns the net present value of the instrument. ">NPV</a>();</div><div class="line">        error = portfolioValue - referenceValue;</div><div class="line">        std::cout &lt;&lt; std::setw(widths[0]) &lt;&lt; std::left</div><div class="line">                  &lt;&lt; <span class="stringliteral">"Replicating portfolio (26 dates)"</span></div><div class="line">                  &lt;&lt; std::fixed</div><div class="line">                  &lt;&lt; std::setw(widths[1]) &lt;&lt; std::left &lt;&lt; portfolioValue</div><div class="line">                  &lt;&lt; std::setw(widths[2]) &lt;&lt; std::left &lt;&lt; error</div><div class="line">                  &lt;&lt; std::endl;</div><div class="line"></div><div class="line">        <span class="comment">// For the third portfolio, we'll use 52 dates at one-week's</span></div><div class="line">        <span class="comment">// distance.</span></div><div class="line">        <span class="keywordflow">for</span> (i=52; i&gt;=1; i--) {</div><div class="line">            <span class="comment">// Same as above.</span></div><div class="line">            <a class="code" href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/class_quant_lib_1_1_date.html" title="Concrete date class. ">Date</a> innerMaturity = today + i*Weeks;</div><div class="line">            boost::shared_ptr&lt;Exercise&gt; innerExercise(</div><div class="line">                                         <span class="keyword">new</span> <a class="code" href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/class_quant_lib_1_1_european_exercise.html" title="European exercise. ">EuropeanExercise</a>(innerMaturity));</div><div class="line">            boost::shared_ptr&lt;StrikedTypePayoff&gt; innerPayoff(</div><div class="line">                                <span class="keyword">new</span> <a class="code" href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/class_quant_lib_1_1_plain_vanilla_payoff.html" title="Plain-vanilla payoff. ">PlainVanillaPayoff</a>(Option::Put, barrier));</div><div class="line">            boost::shared_ptr&lt;Instrument&gt; putn(</div><div class="line">                              <span class="keyword">new</span> <a class="code" href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/class_quant_lib_1_1_european_option.html" title="European option on a single asset. ">EuropeanOption</a>(innerPayoff, innerExercise));</div><div class="line">            putn-&gt;setPricingEngine(europeanEngine);</div><div class="line">            <a class="code" href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/class_quant_lib_1_1_date.html" title="Concrete date class. ">Date</a> killDate = today + (i-1)*Weeks;</div><div class="line">            <a class="code" href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/class_quant_lib_1_1_singleton.html#ab7455b7e1235d292c444095842349291" title="access to the unique instance ">Settings::instance</a>().<a class="code" href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/class_quant_lib_1_1_settings.html#a95055e9410ed0465a5f30d3ffc90c1d3" title="the date at which pricing is to be performed. ">evaluationDate</a>() = killDate;</div><div class="line">            underlying-&gt;setValue(barrier);</div><div class="line">            <a class="code" href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/group__types.html#ga4bdf4bfe76b9ffa6fa64c47d8bfa0c78" title="real number ">Real</a> portfolioValue = portfolio3.<a class="code" href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/class_quant_lib_1_1_instrument.html#a4f791921f063f3ea19bd6efa9ceb4892" title="returns the net present value of the instrument. ">NPV</a>();</div><div class="line">            <a class="code" href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/group__types.html#ga4bdf4bfe76b9ffa6fa64c47d8bfa0c78" title="real number ">Real</a> putValue = putn-&gt;NPV();</div><div class="line">            <a class="code" href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/group__types.html#ga4bdf4bfe76b9ffa6fa64c47d8bfa0c78" title="real number ">Real</a> notional = portfolioValue/putValue;</div><div class="line">            portfolio3.<a class="code" href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/class_quant_lib_1_1_composite_instrument.html#af781618b4ac4bee06da95a7c8b2ee662" title="shorts an instrument from the composite ">subtract</a>(putn, notional);</div><div class="line">        }</div><div class="line">        <a class="code" href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/class_quant_lib_1_1_singleton.html#ab7455b7e1235d292c444095842349291" title="access to the unique instance ">Settings::instance</a>().<a class="code" href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/class_quant_lib_1_1_settings.html#a95055e9410ed0465a5f30d3ffc90c1d3" title="the date at which pricing is to be performed. ">evaluationDate</a>() = today;</div><div class="line">        underlying-&gt;setValue(underlyingValue);</div><div class="line">        portfolioValue = portfolio3.<a class="code" href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/class_quant_lib_1_1_instrument.html#a4f791921f063f3ea19bd6efa9ceb4892" title="returns the net present value of the instrument. ">NPV</a>();</div><div class="line">        error = portfolioValue - referenceValue;</div><div class="line">        std::cout &lt;&lt; std::setw(widths[0]) &lt;&lt; std::left</div><div class="line">                  &lt;&lt; <span class="stringliteral">"Replicating portfolio (52 dates)"</span></div><div class="line">                  &lt;&lt; std::fixed</div><div class="line">                  &lt;&lt; std::setw(widths[1]) &lt;&lt; std::left &lt;&lt; portfolioValue</div><div class="line">                  &lt;&lt; std::setw(widths[2]) &lt;&lt; std::left &lt;&lt; error</div><div class="line">                  &lt;&lt; std::endl;</div><div class="line"></div><div class="line">        <span class="comment">// Now we modify the market condition to see whether the</span></div><div class="line">        <span class="comment">// replication holds. First, we change the underlying value so</span></div><div class="line">        <span class="comment">// that the option is out of the money.</span></div><div class="line">        std::cout &lt;&lt; dblrule &lt;&lt; std::endl;</div><div class="line">        std::cout &lt;&lt; <span class="stringliteral">"Modified market conditions: out of the money"</span></div><div class="line">                  &lt;&lt; std::endl;</div><div class="line">        std::cout &lt;&lt; dblrule &lt;&lt; std::endl;</div><div class="line">        std::cout &lt;&lt; std::setw(widths[0]) &lt;&lt; std::left &lt;&lt; <span class="stringliteral">"Option"</span></div><div class="line">                  &lt;&lt; std::setw(widths[1]) &lt;&lt; std::left &lt;&lt; <span class="stringliteral">"NPV"</span></div><div class="line">                  &lt;&lt; std::setw(widths[2]) &lt;&lt; std::left &lt;&lt; <span class="stringliteral">"Error"</span></div><div class="line">                  &lt;&lt; std::endl;</div><div class="line">        std::cout &lt;&lt; rule &lt;&lt; std::endl;</div><div class="line"></div><div class="line">        underlying-&gt;setValue(110.0);</div><div class="line"></div><div class="line">        referenceValue = referenceOption.<a class="code" href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/class_quant_lib_1_1_instrument.html#a4f791921f063f3ea19bd6efa9ceb4892" title="returns the net present value of the instrument. ">NPV</a>();</div><div class="line">        std::cout &lt;&lt; std::setw(widths[0]) &lt;&lt; std::left</div><div class="line">                  &lt;&lt; <span class="stringliteral">"Original barrier option"</span></div><div class="line">                  &lt;&lt; std::fixed</div><div class="line">                  &lt;&lt; std::setw(widths[1]) &lt;&lt; std::left &lt;&lt; referenceValue</div><div class="line">                  &lt;&lt; std::setw(widths[2]) &lt;&lt; std::left &lt;&lt; <span class="stringliteral">"N/A"</span></div><div class="line">                  &lt;&lt; std::endl;</div><div class="line">        portfolioValue = portfolio1.<a class="code" href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/class_quant_lib_1_1_instrument.html#a4f791921f063f3ea19bd6efa9ceb4892" title="returns the net present value of the instrument. ">NPV</a>();</div><div class="line">        error = portfolioValue - referenceValue;</div><div class="line">        std::cout &lt;&lt; std::setw(widths[0]) &lt;&lt; std::left</div><div class="line">                  &lt;&lt; <span class="stringliteral">"Replicating portfolio (12 dates)"</span></div><div class="line">                  &lt;&lt; std::fixed</div><div class="line">                  &lt;&lt; std::setw(widths[1]) &lt;&lt; std::left &lt;&lt; portfolioValue</div><div class="line">                  &lt;&lt; std::setw(widths[2]) &lt;&lt; std::left &lt;&lt; error</div><div class="line">                  &lt;&lt; std::endl;</div><div class="line">        portfolioValue = portfolio2.<a class="code" href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/class_quant_lib_1_1_instrument.html#a4f791921f063f3ea19bd6efa9ceb4892" title="returns the net present value of the instrument. ">NPV</a>();</div><div class="line">        error = portfolioValue - referenceValue;</div><div class="line">        std::cout &lt;&lt; std::setw(widths[0]) &lt;&lt; std::left</div><div class="line">                  &lt;&lt; <span class="stringliteral">"Replicating portfolio (26 dates)"</span></div><div class="line">                  &lt;&lt; std::fixed</div><div class="line">                  &lt;&lt; std::setw(widths[1]) &lt;&lt; std::left &lt;&lt; portfolioValue</div><div class="line">                  &lt;&lt; std::setw(widths[2]) &lt;&lt; std::left &lt;&lt; error</div><div class="line">                  &lt;&lt; std::endl;</div><div class="line">        portfolioValue = portfolio3.<a class="code" href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/class_quant_lib_1_1_instrument.html#a4f791921f063f3ea19bd6efa9ceb4892" title="returns the net present value of the instrument. ">NPV</a>();</div><div class="line">        error = portfolioValue - referenceValue;</div><div class="line">        std::cout &lt;&lt; std::setw(widths[0]) &lt;&lt; std::left</div><div class="line">                  &lt;&lt; <span class="stringliteral">"Replicating portfolio (52 dates)"</span></div><div class="line">                  &lt;&lt; std::fixed</div><div class="line">                  &lt;&lt; std::setw(widths[1]) &lt;&lt; std::left &lt;&lt; portfolioValue</div><div class="line">                  &lt;&lt; std::setw(widths[2]) &lt;&lt; std::left &lt;&lt; error</div><div class="line">                  &lt;&lt; std::endl;</div><div class="line"></div><div class="line">        <span class="comment">// Next, we change the underlying value so that the option is</span></div><div class="line">        <span class="comment">// in the money.</span></div><div class="line">        std::cout &lt;&lt; dblrule &lt;&lt; std::endl;</div><div class="line">        std::cout &lt;&lt; <span class="stringliteral">"Modified market conditions: in the money"</span> &lt;&lt; std::endl;</div><div class="line">        std::cout &lt;&lt; dblrule &lt;&lt; std::endl;</div><div class="line">        std::cout &lt;&lt; std::setw(widths[0]) &lt;&lt; std::left &lt;&lt; <span class="stringliteral">"Option"</span></div><div class="line">                  &lt;&lt; std::setw(widths[1]) &lt;&lt; std::left &lt;&lt; <span class="stringliteral">"NPV"</span></div><div class="line">                  &lt;&lt; std::setw(widths[2]) &lt;&lt; std::left &lt;&lt; <span class="stringliteral">"Error"</span></div><div class="line">                  &lt;&lt; std::endl;</div><div class="line">        std::cout &lt;&lt; rule &lt;&lt; std::endl;</div><div class="line"></div><div class="line">        underlying-&gt;setValue(90.0);</div><div class="line"></div><div class="line">        referenceValue = referenceOption.<a class="code" href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/class_quant_lib_1_1_instrument.html#a4f791921f063f3ea19bd6efa9ceb4892" title="returns the net present value of the instrument. ">NPV</a>();</div><div class="line">        std::cout &lt;&lt; std::setw(widths[0]) &lt;&lt; std::left</div><div class="line">                  &lt;&lt; <span class="stringliteral">"Original barrier option"</span></div><div class="line">                  &lt;&lt; std::fixed</div><div class="line">                  &lt;&lt; std::setw(widths[1]) &lt;&lt; std::left &lt;&lt; referenceValue</div><div class="line">                  &lt;&lt; std::setw(widths[2]) &lt;&lt; std::left &lt;&lt; <span class="stringliteral">"N/A"</span></div><div class="line">                  &lt;&lt; std::endl;</div><div class="line">        portfolioValue = portfolio1.<a class="code" href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/class_quant_lib_1_1_instrument.html#a4f791921f063f3ea19bd6efa9ceb4892" title="returns the net present value of the instrument. ">NPV</a>();</div><div class="line">        error = portfolioValue - referenceValue;</div><div class="line">        std::cout &lt;&lt; std::setw(widths[0]) &lt;&lt; std::left</div><div class="line">                  &lt;&lt; <span class="stringliteral">"Replicating portfolio (12 dates)"</span></div><div class="line">                  &lt;&lt; std::fixed</div><div class="line">                  &lt;&lt; std::setw(widths[1]) &lt;&lt; std::left &lt;&lt; portfolioValue</div><div class="line">                  &lt;&lt; std::setw(widths[2]) &lt;&lt; std::left &lt;&lt; error</div><div class="line">                  &lt;&lt; std::endl;</div><div class="line">        portfolioValue = portfolio2.<a class="code" href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/class_quant_lib_1_1_instrument.html#a4f791921f063f3ea19bd6efa9ceb4892" title="returns the net present value of the instrument. ">NPV</a>();</div><div class="line">        error = portfolioValue - referenceValue;</div><div class="line">        std::cout &lt;&lt; std::setw(widths[0]) &lt;&lt; std::left</div><div class="line">                  &lt;&lt; <span class="stringliteral">"Replicating portfolio (26 dates)"</span></div><div class="line">                  &lt;&lt; std::fixed</div><div class="line">                  &lt;&lt; std::setw(widths[1]) &lt;&lt; std::left &lt;&lt; portfolioValue</div><div class="line">                  &lt;&lt; std::setw(widths[2]) &lt;&lt; std::left &lt;&lt; error</div><div class="line">                  &lt;&lt; std::endl;</div><div class="line">        portfolioValue = portfolio3.<a class="code" href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/class_quant_lib_1_1_instrument.html#a4f791921f063f3ea19bd6efa9ceb4892" title="returns the net present value of the instrument. ">NPV</a>();</div><div class="line">        error = portfolioValue - referenceValue;</div><div class="line">        std::cout &lt;&lt; std::setw(widths[0]) &lt;&lt; std::left</div><div class="line">                  &lt;&lt; <span class="stringliteral">"Replicating portfolio (52 dates)"</span></div><div class="line">                  &lt;&lt; std::fixed</div><div class="line">                  &lt;&lt; std::setw(widths[1]) &lt;&lt; std::left &lt;&lt; portfolioValue</div><div class="line">                  &lt;&lt; std::setw(widths[2]) &lt;&lt; std::left &lt;&lt; error</div><div class="line">                  &lt;&lt; std::endl;</div><div class="line"></div><div class="line">        <span class="comment">// Finally, a word of warning for those (shame on them) who</span></div><div class="line">        <span class="comment">// run the example but do not read the code.</span></div><div class="line">        std::cout &lt;&lt; dblrule &lt;&lt; std::endl;</div><div class="line">        std::cout</div><div class="line">            &lt;&lt; std::endl</div><div class="line">            &lt;&lt; <span class="stringliteral">"The replication seems to be less robust when volatility and \n"</span></div><div class="line">            &lt;&lt; <span class="stringliteral">"risk-free rate are changed. Feel free to experiment with \n"</span></div><div class="line">            &lt;&lt; <span class="stringliteral">"the example and contribute a patch if you spot any errors."</span></div><div class="line">            &lt;&lt; std::endl;</div><div class="line"></div><div class="line">        <span class="keywordtype">double</span> seconds = timer.elapsed();</div><div class="line">        <a class="code" href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/group__types.html#gab9c87440c314438e51a899a03d2442d0" title="integer number ">Integer</a> hours = int(seconds/3600);</div><div class="line">        seconds -= hours * 3600;</div><div class="line">        <a class="code" href="file:///C:/Users/wangd/Documents/Dongli/01_TODAY/05_Quant/QuantLib-docs-1.10-html.tar/QuantLib-docs-1.10-html/group__types.html#gab9c87440c314438e51a899a03d2442d0" title="integer number ">Integer</a> minutes = int(seconds/60);</div><div class="line">        seconds -= minutes * 60;</div><div class="line">        std::cout &lt;&lt; <span class="stringliteral">" \nRun completed in "</span>;</div><div class="line">        <span class="keywordflow">if</span> (hours &gt; 0)</div><div class="line">            std::cout &lt;&lt; hours &lt;&lt; <span class="stringliteral">" h "</span>;</div><div class="line">        <span class="keywordflow">if</span> (hours &gt; 0 || minutes &gt; 0)</div><div class="line">            std::cout &lt;&lt; minutes &lt;&lt; <span class="stringliteral">" m "</span>;</div><div class="line">        std::cout &lt;&lt; std::fixed &lt;&lt; std::setprecision(0)</div><div class="line">                  &lt;&lt; seconds &lt;&lt; <span class="stringliteral">" s\n"</span> &lt;&lt; std::endl;</div><div class="line"></div><div class="line">        <span class="keywordflow">return</span> 0;</div><div class="line">    } <span class="keywordflow">catch</span> (std::exception&amp; e) {</div><div class="line">        std::cerr &lt;&lt; e.what() &lt;&lt; std::endl;</div><div class="line">        <span class="keywordflow">return</span> 1;</div><div class="line">    } <span class="keywordflow">catch</span> (...) {</div><div class="line">        std::cerr &lt;&lt; <span class="stringliteral">"unknown error"</span> &lt;&lt; std::endl;</div><div class="line">        <span class="keywordflow">return</span> 1;</div><div class="line">    }</div><div class="line">}</div></div><!-- fragment --> </div><!-- contents -->
<!-- HTML footer for doxygen 1.8.9.1-->
<!-- start footer part -->
<hr class="footer"><address class="footer"><small>
Generated by <a href="http://www.doxygen.org/index.html">Doxygen</a>
1.8.13
</small></address>


</body></html>